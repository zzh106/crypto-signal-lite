# Crypto Signal Lite

专用于分析 **AR/USDT** (Arweave) 的量化交易信号检测工具。

## ✨ 功能特性

- 📊 **趋势信号检测**: 基于 MA、MACD、RSI 的买卖信号
- 📈 **历史回测**: 计算信号胜率、平均收益率、最大回撤
- 🎨 **可视化图表**: Plotly 交互式K线图，标注买卖点
- 🔔 **消息推送**: 支持 Server酱 推送交易信号
- ⏰ **定时任务**: 每天自动运行分析

## 🏗️ 项目结构

```
crypto-signal-lite/
├── main.py                 # 主程序入口
├── config.yaml            # 配置文件
├── requirements.txt       # Python依赖
├── backtest.py           # 回测模块
├── visualize.py          # 可视化模块
└── app/
    ├── __init__.py
    ├── fetch_data.py     # 数据获取模块
    ├── indicators.py     # 技术指标计算
    └── notifier.py       # 通知推送模块
```

## 🚀 快速开始

### 1. 环境要求

- Python ≥ 3.9
- pip

### 2. 安装依赖

```bash
cd crypto-signal-lite
pip install -r requirements.txt
```

### 3. 配置修改

编辑 `config.yaml` 文件：

```yaml
symbol: ARUSDT          # 交易对
exchange: binance       # 交易所
intervals: ["1d", "1w"] # 分析周期
data_limit: 500         # 获取K线数量

notify:
  method: serverchan
  key: your_serverchan_key_here  # 替换为你的 Server酱 key
```

**获取 Server酱 Key**:
1. 访问 https://sct.ftqq.com/
2. 注册/登录账号
3. 获取 SendKey
4. 将 key 填入配置文件

### 4. 运行程序

#### 立即运行一次

```bash
python main.py
```

#### 定时运行模式

```bash
python main.py --schedule
```

程序将在每天北京时间 09:00 (UTC 01:00) 自动运行。

## 📊 信号逻辑

### 买入信号

同时满足以下条件：
- ✅ MA20 上穿 MA60
- ✅ MACD柱 > 0
- ✅ RSI > 50

### 卖出信号

同时满足以下条件：
- ✅ MA20 下穿 MA60
- ✅ MACD柱 < 0
- ✅ RSI < 60

## 📈 技术指标

- **MA20/MA60**: 移动平均线
- **MACD(12,26,9)**: 指数平滑异同移动平均线
- **RSI(14)**: 相对强弱指标
- **BOLL(20)**: 布林带（用于波动检测）

## 📋 回测指标

程序会自动计算以下指标：

- **总信号数**: 历史检测到的信号总数
- **总交易数**: 完成的交易次数
- **胜率**: 盈利交易占比
- **平均收益率**: 所有交易的平均收益率
- **最大回撤**: 持仓期间的最大亏损

## 🎨 可视化图表

程序会生成交互式 HTML 图表，保存在 `charts/` 目录：

- **K线图**: 显示价格走势
- **MA线**: MA20 (蓝线) 和 MA60 (橙线)
- **买卖点标记**: 
  - 🟢 绿色上三角 = 买入信号
  - 🔴 红色下三角 = 卖出信号
- **MACD指标**: MACD线、信号线、柱状图
- **RSI指标**: RSI线及超买超卖区域

打开 `charts/arusdt_signal_chart.html` 查看图表。

## 📝 运行示例

```
============================================================
🚀 Crypto Signal Lite 启动
时间: 2025-01-08 09:00:00
交易对: ARUSDT
============================================================

============================================================
📊 分析周期: 1d
============================================================
📥 正在获取 ARUSDT 1d 数据...
✅ 成功获取 500 根K线数据
🔢 计算技术指标...
🔍 检测交易信号...
📈 运行历史回测...
🎨 生成可视化图表...

📈 ARUSDT 触发买入信号 | 1d | 收盘价 15.82
✅ Server酱推送成功
📊 历史胜率: 68.0% | 平均收益: +12.40% | 最大回撤: -5.90%
📊 可视化图表已保存至: charts/arusdt_signal_chart.html

📋 最近 12 个月交易记录
--------------------------------------------------------------------------------
日期         信号   入场价      出场价      最高价      收益率     状态
--------------------------------------------------------------------------------
2025-01-10  买入    9.2000     11.3000    11.5000    +22.83%   ✅
2025-03-14  买入    10.8000    9.4000     10.9000    -12.96%   ❌
...
--------------------------------------------------------------------------------
```

## 🔧 常见问题

### Q: 如何修改交易对？

编辑 `config.yaml`，修改 `symbol` 字段，例如：
```yaml
symbol: BTCUSDT
```

### Q: 如何添加更多技术指标？

编辑 `app/indicators.py` 中的 `calculate_indicators` 方法。

### Q: 如何修改信号逻辑？

编辑 `app/indicators.py` 中的 `detect_signals` 方法。

### Q: Server酱推送失败？

检查：
1. `config.yaml` 中的 key 是否正确
2. 网络连接是否正常
3. Server酱服务是否可用

未配置 key 时，程序会打印到控制台，不影响运行。

## 📄 许可证

本项目基于原 CryptoSignal 项目，遵循原项目许可证。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📧 联系方式

如有问题，请提交 Issue 或联系维护者。

