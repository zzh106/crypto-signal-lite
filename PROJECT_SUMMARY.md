# Crypto Signal Lite - 项目总结

## 🎯 项目定位

专用于 **AR/USDT** 的量化交易信号检测工具，通过技术指标分析提供交易建议。

---

## 📊 核心工作流程

```
1. 数据获取 (OKX API)
   ↓
2. 技术指标计算 (MA/MACD/RSI/BOLL)
   ↓
3. 交易信号检测 (买入/卖出)
   ↓
4. 历史回测分析 (胜率/收益/回撤)
   ↓
5. 可视化图表生成 (Plotly)
   ↓
6. 消息推送通知 (Server酱)
```

---

## 🔧 核心模块

| 模块 | 文件 | 功能 | 状态 |
|------|------|------|------|
| 数据获取 | `app/fetch_data.py` | OKX API + 备用数据源 | ✅ |
| 指标计算 | `app/indicators.py` | MA/MACD/RSI/BOLL | ✅ |
| 信号检测 | `app/indicators.py` | 买入/卖出信号 | ✅ |
| 回测分析 | `backtest.py` | 胜率/收益/回撤 | ✅ |
| 可视化 | `visualize.py` | Plotly图表 | ✅ |
| 消息推送 | `app/notifier.py` | Server酱通知 | ✅ |
| 主程序 | `main.py` | 流程协调 | ✅ |

---

## 📈 技术指标

### 计算的指标
- **MA20/MA60**: 移动平均线（趋势判断）
- **MACD (12,26,9)**: 指数平滑异同（动能判断）
- **RSI(14)**: 相对强弱指标（超买超卖）
- **BOLL(20)**: 布林带（波动判断）

### 信号逻辑

**买入信号**（需同时满足3个条件）:
1. ✅ MA20 上穿 MA60
2. ✅ MACD柱 > 0
3. ✅ RSI > 50

**卖出信号**（需同时满足3个条件）:
1. ✅ MA20 下穿 MA60
2. ✅ MACD柱 < 0
3. ✅ RSI < 60

---

## 💪 当前能力

### ✅ 已实现
- [x] OKX API 数据获取（对大陆友好）
- [x] 4种技术指标计算（手动实现，无外部依赖）
- [x] 交易信号检测（买入/卖出）
- [x] 历史回测（胜率、平均收益、最大回撤）
- [x] 交互式可视化图表（Plotly）
- [x] Server酱消息推送
- [x] 定时任务（每天09:00）
- [x] 多周期分析（日线、周线）
- [x] 备用数据源（API失败时）

### ⚠️ 限制
- ❌ OKX API 单次最多100根K线
- ❌ 信号条件严格（可能错过机会）
- ❌ 回测未考虑手续费和滑点
- ❌ 只支持单一交易对（AR/USDT）
- ❌ 只支持日线和周线
- ❌ 无止损止盈机制

---

## 📁 项目结构

```
crypto-signal-lite/
├── main.py                 # 主程序（1424行代码总计）
├── config.yaml            # 配置文件
├── backtest.py           # 回测模块
├── visualize.py          # 可视化模块
├── analyze_signals.py    # 信号分析脚本
└── app/
    ├── fetch_data.py     # 数据获取
    ├── indicators.py     # 指标计算
    └── notifier.py       # 消息推送
```

---

## 🚀 运行方式

```bash
# 立即运行
python main.py

# 定时运行（每天09:00）
python main.py --schedule

# 信号分析（过去3个月）
python analyze_signals.py
```

---

## 📊 输出内容

1. **控制台输出**:
   - 最新信号信息
   - 回测统计（胜率、收益、回撤）
   - 交易记录表

2. **图表文件**:
   - `charts/arusdt_signal_chart.html` (交互式K线图)

3. **消息推送**:
   - Server酱通知（检测到信号时）

---

## 🔍 数据流

```
OKX API → DataFrame(OHLCV) → 技术指标 → 信号检测 → 回测分析 → 可视化/通知
```

---

## 📝 配置文件

```yaml
symbol: ARUSDT              # 交易对
exchange: okx               # 交易所
intervals: ["1d", "1w"]     # 分析周期
data_limit: 500             # 数据量（实际限制100）

notify:
  method: serverchan        # 通知方式
  key: SCT301986...         # Server酱 Key
```

---

## 🎯 优化方向建议

### 短期优化
1. **数据获取**: 支持多次请求获取更多历史数据
2. **信号优化**: 增加信号强度评分，放宽条件
3. **回测增强**: 添加手续费、滑点、止损止盈
4. **多交易对**: 支持配置多个交易对

### 中期优化
1. **策略优化**: 参数优化、策略回测
2. **实时监控**: WebSocket实时数据
3. **通知增强**: 支持多种通知方式（邮件、Telegram等）
4. **日志系统**: 完整的日志记录

### 长期优化
1. **机器学习**: 使用ML优化信号检测
2. **多策略**: 支持多种交易策略
3. **Web界面**: 可视化Dashboard
4. **API服务**: 提供RESTful API

---

## 📚 相关文档

- `README.md`: 用户使用指南
- `ARCHITECTURE.md`: 详细架构文档
- `EXAMPLE_OUTPUT.md`: 运行示例

---

**项目状态**: ✅ 可用  
**代码行数**: ~1424 行  
**最后更新**: 2025-11-09

